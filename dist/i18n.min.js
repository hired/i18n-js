!function(e){if("undefined"!=typeof module&&module.exports)module.exports=e(this);else if("function"==typeof define&&define.amd){var t=this;define("i18n",function(){return e(t)})}else{var r=function(e,t,r){var a=t.split("."),n=a.pop();a.forEach(function(t){e[t]=e[t]||{},e=e[t]}),e[n]=r};r(this,"I18n",e(this))}}(function(e){"use strict";function t(e){return("0"+e.toString()).substr(-2)}function r(e,t){return o("round",e,-t).toFixed(t)}function a(e){return void 0!==e&&null!==e}function n(e){var t=typeof e;return"function"===t||"object"===t&&e}function i(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)}function o(e,t,r){return"undefined"==typeof r||0===+r?Math[e](t):(t=+t,r=+r,isNaN(t)||"number"!=typeof r||r%1!==0?NaN:(t=t.toString().split("e"),t=Math[e](+(t[0]+"e"+(t[1]?+t[1]-r:-r))),t=t.toString().split("e"),+(t[0]+"e"+(t[1]?+t[1]+r:r))))}function l(e,t){return t=s(t),e.constructor===Array&&(e=e.join(d.defaultSeparator)),t.scope&&(e=[t.scope,e].join(d.defaultSeparator)),e}function s(){for(var e,t=g.call(arguments),r={};t.length;)if(e=t.shift(),"object"==typeof e)for(var n in e)e.hasOwnProperty(n)&&(a(r[n])||(r[n]=e[n]));return r}function u(e,t){for(var r in t)if(b.call(t,r)){var a=t[r];n(a)?e[r]=u(e[r]||{},a):e[r]=a}return e||{}}function c(){var e=function(e){"undefined"==typeof d[e]&&null!==d[e]&&(d[e]=z[e])};e("defaultLocale"),e("locale"),e("defaultSeparator"),e("placeholder"),e("fallbacks"),e("translations"),e("missingBehavior"),e("missingTranslationPrefix")}function f(e,t){t=s(t);var r,n,i,o=d.locales.get(t.locale).slice();for(e=l(e,t);o.length;)if(r=o.shift(),n=e.split(d.defaultSeparator),i=d.translations[r]){for(;n.length&&(i=i[n.shift()],void 0!==i&&null!==i););if(void 0!==i&&null!==i)return i}return a(t.defaultValue)?t.defaultValue:void 0}function p(){var e=f("time"),t=f("date");return e&&e.am&&e.pm?[e.am,e.pm]:t&&t.meridian?t.meridian:y.meridian}function m(e,t){var r=[{scope:e}];return a(t.defaults)&&(r=r.concat(t.defaults)),a(t.defaultValue)&&(r.push({message:t.defaultValue}),delete t.defaultValue),r}function h(e,t){t=s(t);var r,n,i,o,l=e.match(d.placeholder);if(!l)return e;for(var n;l.length;)r=l.shift(),i=r.replace(d.placeholder,"$1"),n=a(t[i])?t[i].toString().replace(/\$/gm,"_#$#_"):i in t?d.nullPlaceholder(r,e,t):d.missingPlaceholder(r,e,t),o=new RegExp(r.replace(/\{/gm,"\\{").replace(/\}/gm,"\\}")),e=e.replace(o,n);return e.replace(/_#\$#_/g,"$")}var d=e&&e.I18n||{},g=Array.prototype.slice,b=Object.prototype.hasOwnProperty,y={day_names:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],abbr_day_names:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],month_names:[null,"January","February","March","April","May","June","July","August","September","October","November","December"],abbr_month_names:[null,"Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],meridian:["AM","PM"]},v={precision:3,separator:".",delimiter:",",strip_insignificant_zeros:!1},S={unit:"$",precision:2,format:"%u%n",sign_first:!0,delimiter:",",separator:"."},T={unit:"%",precision:3,format:"%n%u",separator:".",delimiter:""},_=[null,"kb","mb","gb","tb"],z={defaultLocale:"en",locale:"en",defaultSeparator:".",placeholder:/(?:\{\{|%\{)(.*?)(?:\}\}?)/gm,fallbacks:!1,translations:{},missingBehavior:"message",missingTranslationPrefix:""};return d.reset=function(){this.defaultLocale=z.defaultLocale,this.locale=z.locale,this.defaultSeparator=z.defaultSeparator,this.placeholder=z.placeholder,this.fallbacks=z.fallbacks,this.translations=z.translations,this.missingBehavior=z.missingBehavior,this.missingTranslationPrefix=z.missingTranslationPrefix},d.locales={},d.locales.get=function(e){var t=this[e]||this[d.locale]||this["default"];return"function"==typeof t&&(t=t(e)),i(t)===!1&&(t=[t]),t},d.locales["default"]=function(e){var t,r=[],a=[];return e&&r.push(e),!e&&d.locale&&r.push(d.locale),d.fallbacks&&d.defaultLocale&&r.push(d.defaultLocale),r.forEach(function(e){t=e.split("-")[0],a.includes(e)||a.push(e),d.fallbacks&&t&&t!==e&&!a.includes(t)&&a.push(t)}),0===r.length&&r.push("en"),a},d.pluralization={},d.pluralization.get=function(e){return this[e]||this[d.locale]||this["default"]},d.pluralization["default"]=function(e){switch(e){case 0:return["zero","other"];case 1:return["one"];default:return["other"]}},d.currentLocale=function(){return this.locale||this.defaultLocale},d.translate=function(e,t){t=s(t);var r,i=m(e,t),o=i.some(function(e){return a(e.scope)?r=f(e.scope,t):a(e.message)&&(r=e.message),void 0!==r&&null!==r?!0:void 0},this);return o?("string"==typeof r?r=h(r,t):n(r)&&a(t.count)&&(r=this.pluralize(t.count,r,t)),r):this.missingTranslation(e,t)},d.pluralize=function(e,t,r){r=s(r);var i,o,l,u,c;if(i=n(t)?t:f(t,r),!i)return this.missingTranslation(t,r);for(o=this.pluralization.get(r.locale),l=o(e);l.length;)if(u=l.shift(),a(i[u])){c=i[u];break}return r.count=String(e),h(c,r)},d.missingTranslation=function(e,t){return d.missingTranslation[this.missingBehavior].call(this,e,t)},d.missingTranslation.guess=function(e){var t=e.split(".").slice(-1)[0];return(this.missingTranslationPrefix.length>0?this.missingTranslationPrefix:"")+t.replace("_"," ").replace(/([a-z])([A-Z])/g,function(e,t,r){return t+" "+r.toLowerCase()})},d.missingTranslation.message=function(e,t){var r=l(e,t),a=[this.currentLocale(),r].join(this.defaultSeparator);return'[missing "'+a+'" translation]'},d.missingPlaceholder=function(e){return"[missing "+e+" value]"},d.nullPlaceholder=function(){return d.missingPlaceholder.apply(d,arguments)},d.toNumber=function(e,t){t=s(t,f("number.format"),v);var a,n,i=0>e,o=r(Math.abs(e),t.precision).toString(),l=o.split("."),u=[],c=t.format||"%n",p=i?"-":"";for(e=l[0],a=l[1];e.length>0;)u.unshift(e.substr(Math.max(0,e.length-3),3)),e=e.substr(0,e.length-3);return n=u.join(t.delimiter),t.strip_insignificant_zeros&&a&&(a=a.replace(/0+$/,"")),t.precision>0&&a&&(n+=t.separator+a),c=t.sign_first?"%s"+c:c.replace("%n","%s%n"),n=c.replace("%u",t.unit).replace("%n",n).replace("%s",p)},d.toCurrency=function(e,t){return t=s(t,f("number.currency.format"),f("number.format"),S),this.toNumber(e,t)},d.localize=function(e,t,r){switch(r||(r={}),e){case"currency":return this.toCurrency(t);case"number":return e=f("number.format"),this.toNumber(t,e);case"percentage":return this.toPercentage(t);default:var a;return a=e.match(/^(date|time)/)?this.toTime(e,t):t.toString(),h(a,r)}},d.parseDate=function(e){var t,r,a;if("object"==typeof e)return e;if(t=e.toString().match(/(\d{4})-(\d{2})-(\d{2})(?:[ T](\d{2}):(\d{2}):(\d{2})([\.,]\d{1,3})?)?(Z|\+00:?00)?/)){for(var n=1;6>=n;n+=1)t[n]=parseInt(t[n],10)||0;t[2]-=1,a=t[7]?1e3*("0"+t[7]):null,r=t[8]?new Date(Date.UTC(t[1],t[2],t[3],t[4],t[5],t[6],a)):new Date(t[1],t[2],t[3],t[4],t[5],t[6],a)}else"number"==typeof e?(r=new Date,r.setTime(e)):e.match(/([A-Z][a-z]{2}) ([A-Z][a-z]{2}) (\d+) (\d+:\d+:\d+) ([+-]\d+) (\d+)/)?(r=new Date,r.setTime(Date.parse([RegExp.$1,RegExp.$2,RegExp.$3,RegExp.$6,RegExp.$4,RegExp.$5].join(" ")))):e.match(/\d+ \d+:\d+:\d+ [+-]\d+ \d+/)?(r=new Date,r.setTime(Date.parse(e))):(r=new Date,r.setTime(Date.parse(e)));return r},d.strftime=function(e,r){var a=f("date"),n=p();if(a||(a={}),a=s(a,y),isNaN(e.getTime()))throw new Error("I18n.strftime() requires a valid date object, but received an invalid date.");var i=e.getDay(),o=e.getDate(),l=e.getFullYear(),u=e.getMonth()+1,c=e.getHours(),m=c,h=c>11?1:0,d=e.getSeconds(),g=e.getMinutes(),b=e.getTimezoneOffset(),v=Math.floor(Math.abs(b/60)),S=Math.abs(b)-60*v,T=(b>0?"-":"+")+(v.toString().length<2?"0"+v:v)+(S.toString().length<2?"0"+S:S);return m>12?m-=12:0===m&&(m=12),r=r.replace("%a",a.abbr_day_names[i]),r=r.replace("%A",a.day_names[i]),r=r.replace("%b",a.abbr_month_names[u]),r=r.replace("%B",a.month_names[u]),r=r.replace("%d",t(o)),r=r.replace("%e",o),r=r.replace("%-d",o),r=r.replace("%H",t(c)),r=r.replace("%-H",c),r=r.replace("%I",t(m)),r=r.replace("%-I",m),r=r.replace("%m",t(u)),r=r.replace("%-m",u),r=r.replace("%M",t(g)),r=r.replace("%-M",g),r=r.replace("%p",n[h]),r=r.replace("%S",t(d)),r=r.replace("%-S",d),r=r.replace("%w",i),r=r.replace("%y",t(l)),r=r.replace("%-y",t(l).replace(/^0+/,"")),r=r.replace("%Y",l),r=r.replace("%z",T)},d.toTime=function(e,t){var r=this.parseDate(t),a=f(e);return r.toString().match(/invalid/i)?r.toString():a?this.strftime(r,a):r.toString()},d.toPercentage=function(e,t){return t=s(t,f("number.percentage.format"),f("number.format"),T),this.toNumber(e,t)},d.toHumanSize=function(e,t){for(var r,a,n=1024,i=e,o=0;i>=n&&4>o;)i/=n,o+=1;return 0===o?(r=this.t("number.human.storage_units.units.byte",{count:i}),a=0):(r=this.t("number.human.storage_units.units."+_[o]),a=i-Math.floor(i)===0?0:1),t=s(t,{unit:r,precision:a,format:"%n%u",delimiter:""}),this.toNumber(i,t)},d.storeTranslations=function(e){d.translations=u(d.translations,e)},d.withLocale=function(e,t){var r=d.locale;try{d.locale=e,t()}finally{d.locale=r}},["localize","parseDate","pluralize","storeTranslations","strftime","toCurrency","toHumanSize","toNumber","toPercentage","toTime","translate","withLocale"].forEach(function(e){d[e]=d[e].bind(d)}),d.t=d.translate,d.l=d.localize,d.p=d.pluralize,c(),d});